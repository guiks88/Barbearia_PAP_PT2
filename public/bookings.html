<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marca√ß√µes - Barbearia Jo√£o Castro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo">‚úÇÔ∏è Barbearia Jo√£o Castro</h1>
            <nav class="nav">
                <a href="index.html" class="btn btn-secondary">‚Üê Voltar</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="booking-steps">
            <!-- Step 0: Autentica√ß√£o do Cliente -->
            <div class="card" id="step-auth">
                <h2>Autentica√ß√£o do Cliente</h2>
                <p style="color: var(--color-text-secondary);">Introduza o seu nome e n√∫mero de telem√≥vel. Iremos enviar um c√≥digo por SMS.</p>

                <form id="clientPhoneForm" class="auth-form">
                    <div class="form-group">
                        <label for="clientAuthName">Nome Completo *</label>
                        <input type="text" id="clientAuthName" required minlength="3" placeholder="Jo√£o Silva">
                    </div>
                    <div class="form-group">
                        <label for="clientAuthPhone">Telem√≥vel *</label>
                        <input type="tel" id="clientAuthPhone" required maxlength="9" placeholder="912345678">
                        <small style="color: var(--color-text-secondary); font-size: 0.85rem;">Formato: 9 d√≠gitos (ex: 912345678)</small>
                    </div>
                    <div id="recaptcha-container" style="margin: 1rem 0;"></div>
                    <button type="button" class="btn btn-primary" id="sendCodeBtn">Enviar C√≥digo</button>

                    <div id="codeSection" class="hidden" style="margin-top: 1rem;">
                        <div class="form-group">
                            <label for="smsCode">C√≥digo SMS *</label>
                            <input type="text" id="smsCode" placeholder="123456">
                        </div>
                        <button type="button" class="btn btn-primary" id="verifyCodeBtn">Confirmar C√≥digo</button>
                    </div>
                </form>
            </div>

            <!-- Step 1: Servi√ßos -->
            <div class="card hidden" id="step-services">
                <h2>1. Escolha o Servi√ßo</h2>
                <div class="services-grid">
                    <div class="service-card" data-service="corte" data-price="15" data-duration="30">
                        <h3>Corte de Cabelo</h3>
                        <p class="price">15‚Ç¨</p>
                        <p style="color: var(--color-text-secondary); font-size: 0.875rem;">‚è±Ô∏è 30 minutos</p>
                        <button class="btn btn-primary btn-small select-service">Selecionar</button>
                    </div>
                    <div class="service-card" data-service="barba" data-price="10" data-duration="20">
                        <h3>Barba</h3>
                        <p class="price">10‚Ç¨</p>
                        <p style="color: var(--color-text-secondary); font-size: 0.875rem;">‚è±Ô∏è 20 minutos</p>
                        <button class="btn btn-primary btn-small select-service">Selecionar</button>
                    </div>
                    <div class="service-card" data-service="corte-barba" data-price="22" data-duration="45">
                        <h3>Corte + Barba</h3>
                        <p class="price">22‚Ç¨</p>
                        <p style="color: var(--color-text-secondary); font-size: 0.875rem;">‚è±Ô∏è 45 minutos</p>
                        <button class="btn btn-primary btn-small select-service">Selecionar</button>
                    </div>
                    <div class="service-card" data-service="sobrancelha" data-price="5" data-duration="10">
                        <h3>Sobrancelha</h3>
                        <p class="price">5‚Ç¨</p>
                        <p style="color: var(--color-text-secondary); font-size: 0.875rem;">‚è±Ô∏è 10 minutos</p>
                        <button class="btn btn-primary btn-small select-service">Selecionar</button>
                    </div>
                    <div class="service-card" data-service="completo" data-price="35" data-duration="60">
                        <h3>Pacote Completo</h3>
                        <p class="price">35‚Ç¨</p>
                        <p style="color: var(--color-text-secondary); font-size: 0.875rem;">‚è±Ô∏è 60 minutos</p>
                        <button class="btn btn-primary btn-small select-service">Selecionar</button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Barbeiro -->
            <div class="card hidden" id="step-barber">
                <h2>2. Escolha o Barbeiro</h2>
                <div class="selected-info">
                    <p><strong>Servi√ßo selecionado:</strong> <span id="selected-service-name"></span> - <span id="selected-service-price"></span>‚Ç¨</p>
                </div>
                <div id="barbersList" class="barbers-list"></div>
            </div>

            <!-- Step 3: Data e Hora -->
            <div class="card hidden" id="step-datetime">
                <h2>3. Escolha a Data e Hora</h2>
                <div class="selected-info">
                    <p><strong>Servi√ßo:</strong> <span id="selected-service-name2"></span> - <span id="selected-service-price2"></span>‚Ç¨</p>
                    <p><strong>Barbeiro:</strong> <span id="selected-barber-name"></span></p>
                </div>

                <!-- Calend√°rio -->
                <div class="calendar-container">
                    <div class="calendar-header">
                        <button class="btn-icon" id="prevMonth">‚Äπ</button>
                        <div class="calendar-title">
                            <select id="monthSelect" class="calendar-select">
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Mar√ßo</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                            <select id="yearSelect" class="calendar-select"></select>
                        </div>
                        <button class="btn-icon" id="nextMonth">‚Ä∫</button>
                    </div>

                    <div class="calendar-weekdays">
                        <div>Dom</div>
                        <div>Seg</div>
                        <div>Ter</div>
                        <div>Qua</div>
                        <div>Qui</div>
                        <div>Sex</div>
                        <div>S√°b</div>
                    </div>

                    <div class="calendar-days" id="calendarDays"></div>
                </div>

                <!-- Hor√°rios Dispon√≠veis -->
                <div class="time-slots-container hidden" id="timeSlotsContainer">
                    <h3 class="slots-title">Hor√°rios Dispon√≠veis - <span id="selectedDateDisplay"></span></h3>
                    <div id="timeSlotsList" class="time-slots-list"></div>
                </div>

                <div class="no-slots-message hidden" id="noSlotsMessage">
                    <p>‚ùå N√£o h√° hor√°rios dispon√≠veis para este dia</p>
                </div>
            </div>

            <!-- Step 4: Confirma√ß√£o de Sucesso -->
            <div class="card hidden" id="step-success">
                <div class="success-message">
                    <h2>‚úÖ Marca√ß√£o Confirmada!</h2>
                    <div class="booking-summary">
                        <h3>Resumo da Marca√ß√£o</h3>
                        <div class="summary-item">
                            <span>Servi√ßo:</span>
                            <strong id="success-service"></strong>
                        </div>
                        <div class="summary-item">
                            <span>Barbeiro:</span>
                            <strong id="success-barber"></strong>
                        </div>
                        <div class="summary-item">
                            <span>Data:</span>
                            <strong id="success-date"></strong>
                        </div>
                        <div class="summary-item">
                            <span>Hora:</span>
                            <strong id="success-time"></strong>
                        </div>
                        <div class="summary-item total">
                            <span>Total a Pagar:</span>
                            <strong id="success-price"></strong>
                        </div>
                    </div>

                    <div class="success-actions">
                        <button class="btn btn-primary" id="newBookingBtn">üìÖ Fazer Outra Marca√ß√£o</button>
                        <button class="btn btn-secondary" id="exitBtn">üè† Sair do Site</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Barbearia Jo√£o Castro. Todos os direitos reservados.</p>
            <a href="barber-login.html" class="admin-link">Barbeiros</a>
            <span class="admin-link">|</span>
            <a href="admin-login.html" class="admin-link">√Årea Administrativa</a>
        </div>
    </footer>

    <script type="module" src="booking-calendar.js"></script>
</body>
</html>
